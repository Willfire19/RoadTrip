<p id="notice"><%= notice %></p>

<p>
  <strong>Title:</strong>
  <%= @trip.title %>
</p>

<p>Add a new Place!</p>
<%= render "places/form" %>

<% @places.each do |place| %>
	<%= place.address %>
	<br>
<% end %>

<script>
	$( document ).ready(function() {


		handler = Gmaps.build('Google');
		handler.buildMap({ provider: {}, internal: {id: 'map'}}, function(){
		  // markers = handler.addMarkers([
		  //   {
		  //     "lat": 0,
		  //     "lng": 0,
		  //     "picture": {
		  //       "url": "https://addons.cdn.mozilla.net/img/uploads/addon_icons/13/13028-64.png",
		  //       "width":  36,
		  //       "height": 36
		  //     },
		  //     "infowindow": "hello!"
		  //   }
		  // ]);
		
			markers = handler.addMarkers(<%=raw @hash.to_json %>);

		  handler.bounds.extendWith(markers);
		  handler.fitMapToBounds();
		});

		// Bottom code is for directions between two places
		// var directionsDisplay = new google.maps.DirectionsRenderer();
		// var directionsService = new google.maps.DirectionsService();

		// function calcRoute() {
		//   var origin      = new google.maps.LatLng(41.850033, -87.6500523);
		//   var destination = new google.maps.LatLng(42.850033, -85.6500523);
		//   var request = {
		//       origin:      origin,
		//       destination: destination,
		//       travelMode:  google.maps.TravelMode.DRIVING
		//   };
		//   directionsService.route(request, function(response, status) {
		//     if (status == google.maps.DirectionsStatus.OK) {
		//       directionsDisplay.setDirections(response);
		//     }
		//   });
		// }

		// calcRoute();

		// var handler = Gmaps.build('Google');
		// handler.buildMap({ internal: {id: 'directions'}}, function(){
		//   directionsDisplay.setMap(handler.getMap());
		// });
	});
</script>

<div style='width: 800px;'>
  <!-- <div id="directions" style='width: 800px; height: 400px;'></div> -->
  <div id="map" style='width: 800px; height: 400px;'></div>
</div>

<hr>

<%= link_to 'Edit', edit_trip_path(@trip) %> |
<%= link_to 'Back', trips_path %>
